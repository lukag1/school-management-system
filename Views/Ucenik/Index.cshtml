@model projekatPPP.Models.ViewModels.UcenikDashboardViewModel

@{
    ViewData["Title"] = "Moj Dashboard";
}

<div class="container mt-4">
    <h1 class="display-5">@ViewData["Title"]</h1>
    <hr />

    <!-- Kartice sa osnovnim informacijama -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Lični Podaci</h5>
                    <p class="card-text"><strong>@Html.DisplayNameFor(m => m.ImePrezime):</strong> @Model.ImePrezime</p>
                    <p class="card-text"><strong>@Html.DisplayNameFor(m => m.OdeljenjeNaziv):</strong> @Model.OdeljenjeNaziv</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Ukupan Uspeh</h5>
                    <p class="card-text"><strong>@Html.DisplayNameFor(m => m.UkupanProsek):</strong> @Model.UkupanProsek.ToString("F2")</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Prisustvo i Angažovanje</h5>
                    <!-- Promena: Prikaz opravdanih i neopravdanih -->
                    <p class="card-text mb-1">
                        <strong>@Html.DisplayNameFor(m => m.UkupnoOpravdanih):</strong> 
                        <span class="badge bg-success">@Model.UkupnoOpravdanih</span>
                    </p>
                    <p class="card-text">
                        <strong>@Html.DisplayNameFor(m => m.UkupnoNeopravdanih):</strong> 
                        <span class="badge bg-danger">@Model.UkupnoNeopravdanih</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- DODATA KARTICA SA PREDMETIMA -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">@Html.DisplayNameFor(m => m.MojiPredmeti)</h5>
        </div>
        <div class="card-body">
            @if (Model.MojiPredmeti.Any())
            {
                <ul class="list-group list-group-flush">
                    @foreach (var predmet in Model.MojiPredmeti)
                    {
                        <li class="list-group-item">@predmet.Naziv</li>
                    }
                </ul>
            }
            else
            {
                <p>Niste dodeljeni nijednom predmetu.</p>
            }
        </div>
    </div>

    <!-- Tabele sa ocenama -->
    <div class="row">
        <div class="col-md-8">
            <h4>Istorija Svih Ocena</h4>
            @if (Model.SveOcene.Any())
            {
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>Predmet</th>
                            <th>Ocena</th>
                            <th>Komentar nastavnika</th>
                            <th>Datum unosa</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var ocena in Model.SveOcene.OrderByDescending(o => o.Datum))
                        {
                            <tr>
                                <td>@ocena.Predmet?.Naziv</td>
                                <td>@ocena.Vrednost</td>
                                <td>@ocena.Komentar</td>
                                <td>@ocena.Datum.ToShortDateString()</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <div class="alert alert-info">Trenutno nemate unetih ocena.</div>
            }
        </div>
        <div class="col-md-4">
            <h4>Prosek po Predmetima</h4>
            @if (Model.ProsekPoPredmetu.Any())
            {
                <table class="table">
                    <thead>
                        <tr>
                            <th>Predmet</th>
                            <th>Prosečna ocena</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var prosek in Model.ProsekPoPredmetu)
                        {
                            <tr>
                                <td>@prosek.Key</td>
                                <td>@prosek.Value.ToString("F2")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                 <div class="alert alert-info">Nema podataka za prikaz.</div>
            }
        </div>
    </div>
</div>